<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="stylesheet"
            href="https://unpkg.com/sakura.css/css/sakura.css"
            type="text/css"
        />
        <title>Routex | API's made easy</title>
    </head>

    <body>
        <h1 id="routex">Routex</h1>
        <p>
            A minimal file tree based api router for building rest api&#39;s
            with node.
        </p>
        <h3 id="motivation">Motivation</h3>
        <p>
            I&#39;m one of the many people who use
            <a href="https://github.com/vercel/next.js">Next.js(Vercel)</a> and
            while the whole framework is great, I&#39;m a huge fan of the API
            routes mechanism and thought I&#39;d implement my own version of it
            so I can continue having seperate backend and frontend code while
            having the ease of writing api routes also, wanted to learn how this
            stuff works. (I&#39;m curious like that).
        </p>
        <h3 id="roadmap-as-of-now">Roadmap (as of now)</h3>
        <ul>
            <li>
                <input checked="" disabled="" type="checkbox" /> Start of simple
                with something that can handle static routes.(Master and Canary)
            </li>
            <li>
                <input checked="" disabled="" type="checkbox" /> Add CLI tool to
                be used with it (Master and Canary)
            </li>
            <li>
                <input checked="" disabled="" type="checkbox" /> Add Dynamic
                paths and parameter parsing. (Canary Only)
            </li>
            <li>
                <input disabled="" type="checkbox" /> Add minimal request and
                response helpers.
            </li>
            <li>
                <input disabled="" type="checkbox" /> Add more features to CLI
                (reloading, watchers, etc, etc)
            </li>
        </ul>
        <p>That&#39;s all I want the <code>routex</code> to do for now.</p>
        <h3 id="warning">Warning</h3>
        <p>
            This library is still in active development and is bound to have
            bugs , kindly make sure you use it only for testing and not for
            production as of now.
        </p>
        <h3 id="current-limitations">Current Limitations</h3>
        <ul>
            <li>
                <p>
                    A very limited cli, no hot reload, no file watcher, it
                    literally just runs a simple processor for reading the file
                    system as of now.
                </p>
            </li>
            <li>
                <p>
                    Since the lib uses the native node HTTP right now, you are
                    limited to it&#39;s request and response functions.
                </p>
            </li>
        </ul>
        <h3 id="usage">Usage</h3>
        <p>
            Any file inside the folder <code>api</code> is mapped to
            <code>/api/*</code> and will be treated as an API endpoint and all
            HTTP requests will be passed to this file. GET, POST, PUT, DELETE
        </p>
        <pre><code class="language-sh"># for global install to avoid installing the devDependencies
npm i -g barelyhuman/routex --only=prod
# for local install to avoid installing the devDependencies
npm i barelyhuman/routex --only=prod</code></pre>
        <p>
            Then go ahead and create directories and files under the
            <code>api</code> folder as mentioned or check the
            <code>examples</code> folder for reference.
        </p>
        <p>Example file tree:</p>
        <pre><code>- api
  - me.js // this compiles to &lt;host&gt;:&lt;port&gt;/api/me
  - [id].js; // this compile to &lt;host&gt;:&lt;port&gt;/api/&lt;dynamicParameterId&gt;</code></pre>
        <p>
            Example <code>me.js</code> that only handles
            <code>GET</code> requests:
        </p>
        <pre><code>module.exports = (req, res) =&gt; {
  if(req.method === &#39;GET&#39;){
    res.writeHead(200, { &#39;Content-Type&#39;: &#39;text/plain&#39; });
    res.write(&#39;Hello World!&#39;);
    res.end();
    return;
  }

  res.statusCode = 404;
  res.end();
  return;
};

</code></pre>
        <p>Example <code>[id].js</code> that handles the dynamic path param:</p>
        <p><code>GET|POST|DELETE /api/1</code></p>
        <pre><code>module.exports = (req, res) =&gt; {
    res.write(&#39;path param &#39; + JSON.stringify(req.params)) // {&quot;id&quot;:1};
    res.end();
};
</code></pre>
        <p>
            Then run routex on the root folder of the project, this folder
            should contain the <code>api</code> folder
        </p>
        <pre><code class="language-sh"># If installed globally
routex
# If installed locally
npx routex
</code></pre>
        <h3 id="rules">Rules</h3>
        <ul>
            <li>No copying of code from Next.js</li>
            <li>Don&#39;t use micro, setup and parse node http from scratch</li>
            <li>Avoid 3rd party npm modules as much as possible</li>
        </ul>
    </body>
</html>
